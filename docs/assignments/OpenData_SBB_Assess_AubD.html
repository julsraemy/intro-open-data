<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.55">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-03-14">

<title>Swiss Public Transportation Data – Introduction to Open Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../android-chrome-512x512.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles/custom.scss">
<meta property="og:title" content="Swiss Public Transportation Data – Introduction to Open Data">
<meta property="og:description" content="Analysis of SBB’s Open Data Usage in Third-Party Applications">
<meta property="og:site_name" content="Introduction to Open Data">
<meta name="twitter:title" content="Swiss Public Transportation Data – Introduction to Open Data">
<meta name="twitter:description" content="Analysis of SBB’s Open Data Usage in Third-Party Applications">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../logo-open.svg" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Introduction to Open Data</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-course-sections" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Course Sections</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-course-sections">    
        <li>
    <a class="dropdown-item" href="../sections/characteristics.html">
 <span class="dropdown-text">Characteristics of Open Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sections/movements.html">
 <span class="dropdown-text">Associated Movements</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sections/principles.html">
 <span class="dropdown-text">Associated Principles</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sections/platforms.html">
 <span class="dropdown-text">Open Data Platforms and Organiations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sections/assessment.html">
 <span class="dropdown-text">Assessment, Data Quality, and Best Practices</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sections/techniques.html">
 <span class="dropdown-text">Techniques, Software, and Tools</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sections/showcases.html">
 <span class="dropdown-text">Showcases</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../assignments.html"> 
<span class="menu-text">Students’ Papers</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../references.html"> 
<span class="menu-text">References</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/julsraemy/intro-open-data" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a>
  <ul>
  <li><a href="#overview-of-sbbs-open-data" id="toc-overview-of-sbbs-open-data" class="nav-link" data-scroll-target="#overview-of-sbbs-open-data">Overview of SBB’s Open Data</a>
  <ul>
  <li><a href="#accessing-sbb-data-as-a-user" id="toc-accessing-sbb-data-as-a-user" class="nav-link" data-scroll-target="#accessing-sbb-data-as-a-user">Accessing SBB Data as a user</a></li>
  <li><a href="#accessing-sbb-data-programmatically-machines-developers" id="toc-accessing-sbb-data-programmatically-machines-developers" class="nav-link" data-scroll-target="#accessing-sbb-data-programmatically-machines-developers">Accessing SBB Data Programmatically (Machines &amp; Developers)</a></li>
  <li><a href="#demonstration-visualization-of-train-occupancy-levels" id="toc-demonstration-visualization-of-train-occupancy-levels" class="nav-link" data-scroll-target="#demonstration-visualization-of-train-occupancy-levels">Demonstration visualization of Train Occupancy Levels</a>
  <ul class="collapse">
  <li><a href="#description-of-the-visualization" id="toc-description-of-the-visualization" class="nav-link" data-scroll-target="#description-of-the-visualization">Description of the Visualization</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#use-cases-in-third-party-applications" id="toc-use-cases-in-third-party-applications" class="nav-link" data-scroll-target="#use-cases-in-third-party-applications">Use Cases in Third-Party Applications</a></li>
  <li><a href="#benefits-of-sbb-open-data-usage" id="toc-benefits-of-sbb-open-data-usage" class="nav-link" data-scroll-target="#benefits-of-sbb-open-data-usage">Benefits of SBB Open Data Usage</a></li>
  <li><a href="#challenges-and-limitations" id="toc-challenges-and-limitations" class="nav-link" data-scroll-target="#challenges-and-limitations">Challenges and Limitations</a></li>
  </ul></li>
  <li><a href="#future-potential-and-recommendations" id="toc-future-potential-and-recommendations" class="nav-link" data-scroll-target="#future-potential-and-recommendations">Future Potential and Recommendations</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/julsraemy/intro-open-data/edit/main/assignments/OpenData_SBB_Assess_AubD.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/julsraemy/intro-open-data/issues/new/choose" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Swiss Public Transportation Data</h1>
<p class="subtitle lead">Analysis of SBB’s Open Data Usage in Third-Party Applications</p>
</div>


<div class="quarto-title-meta-author column-page-left">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">David Aubert </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            HES-SO, Haute école de gestion de Genève
          </p>
      </div>
  </div>

<div class="quarto-title-meta column-page-left">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 14, 2025</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">March 17, 2025</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Public transportation plays a crucial role in Switzerland’s mobility infrastructure, with Swiss Federal Railways (SBB) being a key operator. To enhance transparency, innovation, and efficiency, SBB has adopted an open data policy, allowing public access to a variety of transportation datasets. This initiative aligns with Switzerland’s broader commitment to digital transformation and smart mobility solutions.</p>
<p>The SBB Open Data platform provides datasets that include timetables, real-time vehicle positions, historical travel data, and station information. These datasets are used by third-party developers to create applications that improve user experience, optimize travel routes, and integrate multimodal transport options.</p>
<p>This assessment aims to analyse the significance of SBB’s open data, examining its use in third-party applications, identifying the benefits and challenges, and discussing its potential for future developments.</p>
</section>
<section id="analysis" class="level1">
<h1>Analysis</h1>
<section id="overview-of-sbbs-open-data" class="level2">
<h2 class="anchored" data-anchor-id="overview-of-sbbs-open-data">Overview of SBB’s Open Data</h2>
<p>The SBB Open Data initiative provides access to various datasets through APIs and downloadable files. The main types of data include:</p>
<ul>
<li><strong><em>GTFS</em></strong> (<em>General Transit Feed Specification</em>): Static timetable data used by route planning applications.</li>
<li><strong><em>GTFS-RT</em></strong> (<em>General Transit Feed Specification Real-Time</em>): Live updates on train positions, delays, and disruptions.</li>
<li><strong><em>HAFAS Realtime API</em></strong>: High-quality real-time journey planning data.</li>
<li><strong><em>Station Information</em></strong>: Details on station facilities, accessibility, and services.</li>
<li><strong><em>Passenger Flow Data</em></strong>: Historical data on passenger movements for analysis and optimization.</li>
</ul>
<p>These datasets are available in formats such as CSV, JSON, and XML, making them accessible for integration into various digital platforms.</p>
<p>The SBB data are available on the following platforms:</p>
<ul>
<li><a href="https://opentransportdata.swiss/en/">Open data platform mobility Switzerland</a></li>
<li><a href="https://data.sbb.ch">SBB Open Data platform</a></li>
<li><a href="https://developer.sbb.ch">SBB API Platform</a></li>
<li><a href="https://opendata.swiss/en/organization/schweizerische-bundesbahnen-sbb">opendata.swiss</a></li>
</ul>
<section id="accessing-sbb-data-as-a-user" class="level3">
<h3 class="anchored" data-anchor-id="accessing-sbb-data-as-a-user">Accessing SBB Data as a user</h3>
<p>For individuals who wants to explore SBB’s open datasets manually, he can follow these steps:</p>
<ul>
<li><strong><em>Visit the <a href="https://data.sbb.ch">SBB Open Data Portal</a></em></strong>
<ul>
<li>The homepage provides an overview of available datasets and categories.</li>
<li>All datasets are listed in under the tab “Data”</li>
</ul></li>
<li><strong><em>Browse or Search for Dataset</em></strong>
<ul>
<li>Use the search bar or choose the category in the homepage or use the filter datasets available under the tab “Data”</li>
<li>Click on a dataset to access metadata, descriptions, and downloadable files.</li>
</ul></li>
<li><strong><em>Download Data</em></strong>
<ul>
<li>Most datasets are available in formats like CSV, JSON, or XML.</li>
<li>Click “Download” to retrieve static datasets for analysis in Excel, Python, or other tools.</li>
</ul></li>
<li><strong><em>Explore Data Visualization</em></strong>
<ul>
<li>Some datasets include built-in charts or maps to provide an interactive preview of the data.</li>
</ul></li>
</ul>
</section>
<section id="accessing-sbb-data-programmatically-machines-developers" class="level3">
<h3 class="anchored" data-anchor-id="accessing-sbb-data-programmatically-machines-developers">Accessing SBB Data Programmatically (Machines &amp; Developers)</h3>
<p>For developers and automated systems, SBB provides APIs and machine-readable formats for :</p>
<p><strong>1. Using APIs for Real-Time Data Access</strong></p>
<p>SBB offers several APIs through the <a href="https://developer.sbb.ch">SBB Developer Portal</a>, which require an authentication :</p>
<ul>
<li><strong><em>Register for API Access</em></strong>
<ul>
<li>Developers must create an account at SBB Developer Portal.</li>
<li>API keys may be required for certain datasets.</li>
</ul></li>
<li><strong><em>Fetch Real-Time Data via API Requests</em></strong>
<ul>
<li>Once registered, developers can access data via HTTP requests or using Python scripts</li>
</ul></li>
<li><strong><em>Data Formats for Integration SBB’s, APIs typically return data in:</em></strong>
<ul>
<li>JSON: Ideal for web and mobile applications.</li>
<li>XML: Used in enterprise transport management systems.</li>
<li>GTFS-RT: Standardized format for public transport apps like Google Maps and Citymapper.</li>
</ul></li>
</ul>
<p><strong>2. Downloading Static Datasets</strong></p>
<p>For historical analysis or offline applications:</p>
<ul>
<li>Direct download links (CSV, JSON) are provided in dataset pages.</li>
<li>Example dataset URL:
<ul>
<li>Occupancy Forecast Dataset: <a href="https://data.opentransportdata.swiss/en/dataset/occupancy-forecast-json-dataset" class="uri">https://data.opentransportdata.swiss/en/dataset/occupancy-forecast-json-dataset</a></li>
</ul></li>
</ul>
</section>
<section id="demonstration-visualization-of-train-occupancy-levels" class="level3">
<h3 class="anchored" data-anchor-id="demonstration-visualization-of-train-occupancy-levels">Demonstration visualization of Train Occupancy Levels</h3>
<p>To analyze train occupancy levels, I developed an interactive dashboard using Dash and Plotly. The dashboard features two separate pie charts, as shown in Figure 1, illustrating the occupancy distribution for a train journey for first-class and second-class seating.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="dashboard.png" class="img-fluid figure-img"></p>
<figcaption>Figure 1: First-Class and Second-Class Occupancy Distribution</figcaption>
</figure>
</div>
<section id="description-of-the-visualization" class="level4">
<h4 class="anchored" data-anchor-id="description-of-the-visualization">Description of the Visualization</h4>
<p>The pie charts categorize the occupancy levels into three main groups:</p>
<pre><code>“unknown”: No forecast available.
“manySeatsAvailable”: low occupancy, corresponds to one manikin symbol.
“fewSeatsAvailable”: medium occupancy, corresponds to manikins.
“standingRoomOnly”: high occupancy, corresponds to three manikins.</code></pre>
<p>The following Python code snippet was used to generate the dash board:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="im">import</span> os</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="im">import</span> json</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="im">import</span> dash</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="im">from</span> dash <span class="im">import</span> dcc, html, dash_table, Input, Output</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="im">import</span> plotly.express <span class="im">as</span> px</span>
<span id="cb2-7"><a href="#cb2-7"></a></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co"># Define the data directory</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>data_dir <span class="op">=</span> <span class="st">"file_path//occupancyforecastjson"</span></span>
<span id="cb2-10"><a href="#cb2-10"></a></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="co"># Initialize Dash app</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>app <span class="op">=</span> dash.Dash(<span class="va">__name__</span>)</span>
<span id="cb2-13"><a href="#cb2-13"></a>app.title <span class="op">=</span> <span class="st">"SBB Occupancy Forecast Dashboard"</span></span>
<span id="cb2-14"><a href="#cb2-14"></a></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co"># Layout</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>app.layout <span class="op">=</span> html.Div([</span>
<span id="cb2-17"><a href="#cb2-17"></a>    html.H1(<span class="st">"SBB Occupancy Forecast Dashboard"</span>, style<span class="op">=</span>{<span class="st">'textAlign'</span>: <span class="st">'center'</span>}),</span>
<span id="cb2-18"><a href="#cb2-18"></a>    </span>
<span id="cb2-19"><a href="#cb2-19"></a>    <span class="co"># Date Picker</span></span>
<span id="cb2-20"><a href="#cb2-20"></a>    dcc.DatePickerSingle(</span>
<span id="cb2-21"><a href="#cb2-21"></a>        <span class="bu">id</span><span class="op">=</span><span class="st">'date-picker'</span>,</span>
<span id="cb2-22"><a href="#cb2-22"></a>        min_date_allowed<span class="op">=</span>pd.to_datetime(<span class="st">"2025-03-11"</span>),</span>
<span id="cb2-23"><a href="#cb2-23"></a>        max_date_allowed<span class="op">=</span>pd.to_datetime(<span class="st">"2025-12-31"</span>),</span>
<span id="cb2-24"><a href="#cb2-24"></a>        initial_visible_month<span class="op">=</span>pd.to_datetime(<span class="st">"2025-03-11"</span>),</span>
<span id="cb2-25"><a href="#cb2-25"></a>        date<span class="op">=</span>pd.to_datetime(<span class="st">"2025-03-11"</span>).date()</span>
<span id="cb2-26"><a href="#cb2-26"></a>    ),</span>
<span id="cb2-27"><a href="#cb2-27"></a>    </span>
<span id="cb2-28"><a href="#cb2-28"></a>    <span class="co"># Dropdowns for filtering</span></span>
<span id="cb2-29"><a href="#cb2-29"></a>    dcc.Dropdown(<span class="bu">id</span><span class="op">=</span><span class="st">'train-filter'</span>, placeholder<span class="op">=</span><span class="st">"Select Train Number"</span>),</span>
<span id="cb2-30"><a href="#cb2-30"></a>    dcc.Dropdown(<span class="bu">id</span><span class="op">=</span><span class="st">'station-filter'</span>, placeholder<span class="op">=</span><span class="st">"Select Station"</span>),</span>
<span id="cb2-31"><a href="#cb2-31"></a>    </span>
<span id="cb2-32"><a href="#cb2-32"></a>    <span class="co"># Data Table</span></span>
<span id="cb2-33"><a href="#cb2-33"></a>    dash_table.DataTable(<span class="bu">id</span><span class="op">=</span><span class="st">'train-table'</span>,</span>
<span id="cb2-34"><a href="#cb2-34"></a>                         columns<span class="op">=</span>[</span>
<span id="cb2-35"><a href="#cb2-35"></a>                             {<span class="st">"name"</span>: <span class="st">"Train Number"</span>, <span class="st">"id"</span>: <span class="st">"trainNumber"</span>},</span>
<span id="cb2-36"><a href="#cb2-36"></a>                             {<span class="st">"name"</span>: <span class="st">"Departure"</span>, <span class="st">"id"</span>: <span class="st">"departureStationName"</span>},</span>
<span id="cb2-37"><a href="#cb2-37"></a>                             {<span class="st">"name"</span>: <span class="st">"Destination"</span>, <span class="st">"id"</span>: <span class="st">"destinationStationName"</span>},</span>
<span id="cb2-38"><a href="#cb2-38"></a>                             {<span class="st">"name"</span>: <span class="st">"Departure Time"</span>, <span class="st">"id"</span>: <span class="st">"departureTime"</span>},</span>
<span id="cb2-39"><a href="#cb2-39"></a>                             {<span class="st">"name"</span>: <span class="st">"First Class"</span>, <span class="st">"id"</span>: <span class="st">"firstClass"</span>},</span>
<span id="cb2-40"><a href="#cb2-40"></a>                             {<span class="st">"name"</span>: <span class="st">"Second Class"</span>, <span class="st">"id"</span>: <span class="st">"secondClass"</span>}</span>
<span id="cb2-41"><a href="#cb2-41"></a>                         ],</span>
<span id="cb2-42"><a href="#cb2-42"></a>                         page_size<span class="op">=</span><span class="dv">10</span>),</span>
<span id="cb2-43"><a href="#cb2-43"></a>    </span>
<span id="cb2-44"><a href="#cb2-44"></a>    <span class="co"># Simple Charts</span></span>
<span id="cb2-45"><a href="#cb2-45"></a>    html.Div([</span>
<span id="cb2-46"><a href="#cb2-46"></a>        dcc.Graph(<span class="bu">id</span><span class="op">=</span><span class="st">'first-class-pie-chart'</span>, style<span class="op">=</span>{<span class="st">'display'</span>: <span class="st">'inline-block'</span>, <span class="st">'width'</span>: <span class="st">'48%'</span>}),</span>
<span id="cb2-47"><a href="#cb2-47"></a>        dcc.Graph(<span class="bu">id</span><span class="op">=</span><span class="st">'second-class-pie-chart'</span>, style<span class="op">=</span>{<span class="st">'display'</span>: <span class="st">'inline-block'</span>, <span class="st">'width'</span>: <span class="st">'48%'</span>})</span>
<span id="cb2-48"><a href="#cb2-48"></a>    ])</span>
<span id="cb2-49"><a href="#cb2-49"></a>])</span>
<span id="cb2-50"><a href="#cb2-50"></a></span>
<span id="cb2-51"><a href="#cb2-51"></a><span class="co"># Callback to load data based on selected date</span></span>
<span id="cb2-52"><a href="#cb2-52"></a><span class="at">@app.callback</span>(</span>
<span id="cb2-53"><a href="#cb2-53"></a>    [Output(<span class="st">'train-filter'</span>, <span class="st">'options'</span>),</span>
<span id="cb2-54"><a href="#cb2-54"></a>     Output(<span class="st">'station-filter'</span>, <span class="st">'options'</span>),</span>
<span id="cb2-55"><a href="#cb2-55"></a>     Output(<span class="st">'train-table'</span>, <span class="st">'data'</span>),</span>
<span id="cb2-56"><a href="#cb2-56"></a>     Output(<span class="st">'first-class-pie-chart'</span>, <span class="st">'figure'</span>),</span>
<span id="cb2-57"><a href="#cb2-57"></a>     Output(<span class="st">'second-class-pie-chart'</span>, <span class="st">'figure'</span>)],</span>
<span id="cb2-58"><a href="#cb2-58"></a>    [Input(<span class="st">'date-picker'</span>, <span class="st">'date'</span>),</span>
<span id="cb2-59"><a href="#cb2-59"></a>     Input(<span class="st">'train-filter'</span>, <span class="st">'value'</span>),</span>
<span id="cb2-60"><a href="#cb2-60"></a>     Input(<span class="st">'station-filter'</span>, <span class="st">'value'</span>)]</span>
<span id="cb2-61"><a href="#cb2-61"></a>)</span>
<span id="cb2-62"><a href="#cb2-62"></a><span class="kw">def</span> update_dashboard(selected_date, train_num, station):</span>
<span id="cb2-63"><a href="#cb2-63"></a>    date_folder <span class="op">=</span> os.path.join(data_dir, selected_date)</span>
<span id="cb2-64"><a href="#cb2-64"></a>    <span class="cf">if</span> <span class="kw">not</span> os.path.exists(date_folder):</span>
<span id="cb2-65"><a href="#cb2-65"></a>        <span class="cf">return</span> [], [], [], px.pie(title<span class="op">=</span><span class="st">"No Data"</span>), px.pie(title<span class="op">=</span><span class="st">"No Data"</span>)</span>
<span id="cb2-66"><a href="#cb2-66"></a>    </span>
<span id="cb2-67"><a href="#cb2-67"></a>    all_data <span class="op">=</span> []</span>
<span id="cb2-68"><a href="#cb2-68"></a>    <span class="cf">for</span> <span class="bu">file</span> <span class="kw">in</span> os.listdir(date_folder):</span>
<span id="cb2-69"><a href="#cb2-69"></a>        <span class="cf">with</span> <span class="bu">open</span>(os.path.join(date_folder, <span class="bu">file</span>), <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb2-70"><a href="#cb2-70"></a>            data <span class="op">=</span> json.load(f)</span>
<span id="cb2-71"><a href="#cb2-71"></a>            <span class="cf">for</span> train <span class="kw">in</span> data.get(<span class="st">"trains"</span>, []):</span>
<span id="cb2-72"><a href="#cb2-72"></a>                <span class="cf">for</span> section <span class="kw">in</span> train.get(<span class="st">"sections"</span>, []):</span>
<span id="cb2-73"><a href="#cb2-73"></a>                    all_data.append({</span>
<span id="cb2-74"><a href="#cb2-74"></a>                        <span class="st">"trainNumber"</span>: train[<span class="st">"trainNumber"</span>],</span>
<span id="cb2-75"><a href="#cb2-75"></a>                        <span class="st">"departureStationName"</span>: section[<span class="st">"departureStationName"</span>],</span>
<span id="cb2-76"><a href="#cb2-76"></a>                        <span class="st">"destinationStationName"</span>: section[<span class="st">"destinationStationName"</span>],</span>
<span id="cb2-77"><a href="#cb2-77"></a>                        <span class="st">"departureTime"</span>: section[<span class="st">"departureTime"</span>],</span>
<span id="cb2-78"><a href="#cb2-78"></a>                        <span class="st">"firstClass"</span>: <span class="bu">next</span>((o[<span class="st">"occupancyLevel"</span>] <span class="cf">for</span> o <span class="kw">in</span> section[<span class="st">"expectedDepartureOccupancies"</span>] <span class="cf">if</span> o[<span class="st">"fareClass"</span>] <span class="op">==</span> <span class="st">"firstClass"</span>), <span class="st">"Unknown"</span>),</span>
<span id="cb2-79"><a href="#cb2-79"></a>                        <span class="st">"secondClass"</span>: <span class="bu">next</span>((o[<span class="st">"occupancyLevel"</span>] <span class="cf">for</span> o <span class="kw">in</span> section[<span class="st">"expectedDepartureOccupancies"</span>] <span class="cf">if</span> o[<span class="st">"fareClass"</span>] <span class="op">==</span> <span class="st">"secondClass"</span>), <span class="st">"Unknown"</span>)</span>
<span id="cb2-80"><a href="#cb2-80"></a>                    })</span>
<span id="cb2-81"><a href="#cb2-81"></a>    </span>
<span id="cb2-82"><a href="#cb2-82"></a>    df <span class="op">=</span> pd.DataFrame(all_data)</span>
<span id="cb2-83"><a href="#cb2-83"></a>    </span>
<span id="cb2-84"><a href="#cb2-84"></a>    <span class="co"># Filtering</span></span>
<span id="cb2-85"><a href="#cb2-85"></a>    <span class="cf">if</span> train_num:</span>
<span id="cb2-86"><a href="#cb2-86"></a>        df <span class="op">=</span> df[df[<span class="st">'trainNumber'</span>] <span class="op">==</span> train_num]</span>
<span id="cb2-87"><a href="#cb2-87"></a>    <span class="cf">if</span> station:</span>
<span id="cb2-88"><a href="#cb2-88"></a>        df <span class="op">=</span> df[(df[<span class="st">'departureStationName'</span>] <span class="op">==</span> station) <span class="op">|</span> (df[<span class="st">'destinationStationName'</span>] <span class="op">==</span> station)]</span>
<span id="cb2-89"><a href="#cb2-89"></a>    </span>
<span id="cb2-90"><a href="#cb2-90"></a>    train_options <span class="op">=</span> [{<span class="st">'label'</span>: t, <span class="st">'value'</span>: t} <span class="cf">for</span> t <span class="kw">in</span> df[<span class="st">'trainNumber'</span>].unique()]</span>
<span id="cb2-91"><a href="#cb2-91"></a>    station_options <span class="op">=</span> [{<span class="st">'label'</span>: s, <span class="st">'value'</span>: s} <span class="cf">for</span> s <span class="kw">in</span> pd.concat([df[<span class="st">'departureStationName'</span>], df[<span class="st">'destinationStationName'</span>]]).unique()]</span>
<span id="cb2-92"><a href="#cb2-92"></a>    </span>
<span id="cb2-93"><a href="#cb2-93"></a>    <span class="co"># Pie Charts for First and Second Class</span></span>
<span id="cb2-94"><a href="#cb2-94"></a>    first_class_counts <span class="op">=</span> df[<span class="st">'firstClass'</span>].value_counts().reset_index()</span>
<span id="cb2-95"><a href="#cb2-95"></a>    first_class_counts.columns <span class="op">=</span> [<span class="st">'Occupancy'</span>, <span class="st">'Count'</span>]</span>
<span id="cb2-96"><a href="#cb2-96"></a>    first_class_pie <span class="op">=</span> px.pie(first_class_counts, names<span class="op">=</span><span class="st">'Occupancy'</span>, values<span class="op">=</span><span class="st">'Count'</span>, title<span class="op">=</span><span class="st">'First Class Occupancy'</span>)</span>
<span id="cb2-97"><a href="#cb2-97"></a>    </span>
<span id="cb2-98"><a href="#cb2-98"></a>    second_class_counts <span class="op">=</span> df[<span class="st">'secondClass'</span>].value_counts().reset_index()</span>
<span id="cb2-99"><a href="#cb2-99"></a>    second_class_counts.columns <span class="op">=</span> [<span class="st">'Occupancy'</span>, <span class="st">'Count'</span>]</span>
<span id="cb2-100"><a href="#cb2-100"></a>    second_class_pie <span class="op">=</span> px.pie(second_class_counts, names<span class="op">=</span><span class="st">'Occupancy'</span>, values<span class="op">=</span><span class="st">'Count'</span>, title<span class="op">=</span><span class="st">'Second Class Occupancy'</span>)</span>
<span id="cb2-101"><a href="#cb2-101"></a>    </span>
<span id="cb2-102"><a href="#cb2-102"></a>    <span class="cf">return</span> train_options, station_options, df.to_dict(<span class="st">'records'</span>), first_class_pie, second_class_pie</span>
<span id="cb2-103"><a href="#cb2-103"></a></span>
<span id="cb2-104"><a href="#cb2-104"></a><span class="co"># Run the app</span></span>
<span id="cb2-105"><a href="#cb2-105"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb2-106"><a href="#cb2-106"></a>    app.run_server(debug<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="use-cases-in-third-party-applications" class="level2">
<h2 class="anchored" data-anchor-id="use-cases-in-third-party-applications">Use Cases in Third-Party Applications</h2>
<p>SBB’s open data has been widely adopted by third-party developers to enhance public transportation accessibility and efficiency. Some key applications include:</p>
<ul>
<li><strong>Public Transport Navigation Apps</strong>
<ul>
<li><strong><em>Google Maps</em></strong> &amp; <strong><em>Citymapper</em></strong>: Use SBB’s GTFS data for real-time trip planning, route suggestions, and multimodal transport integration (trains, buses, trams).</li>
<li><strong><em>ÖV Plus</em></strong>: A Swiss-specific app that provides real-time alerts, ticketing services, and personalized travel recommendations.</li>
<li><strong><em>SBB Mobile</em></strong>: While developed by SBB itself, it integrates third-party mobility services (e.g., e-scooters, bike-sharing).</li>
</ul></li>
<li><strong>Smart Mobility and Multimodal Transport Solutions</strong>
<ul>
<li><strong><em>Swiss Travel Guide</em></strong>: Combines SBB train schedules with local tourism insights, helping visitors plan their trips efficiently.</li>
<li><strong><em>Trafi</em></strong> &amp; <strong><em>FAIRTIQ</em></strong>: Integrate SBB’s fare and real-time data to provide automatic, ticketless travel payment solutions.</li>
</ul></li>
<li><strong>Data-Driven Urban Planning &amp; Sustainability Applications</strong>
<ul>
<li><strong><em>Traffic Flow Analysis</em></strong>: Government agencies and researchers use historical passenger flow data to optimize infrastructure and manage congestion.</li>
<li><strong><em>Eco-Routing &amp; CO₂ Reduction Apps</em></strong>: Some startups leverage SBB’s data to promote sustainable travel choices by calculating the lowest-emission routes.</li>
</ul></li>
</ul>
</section>
<section id="benefits-of-sbb-open-data-usage" class="level2">
<h2 class="anchored" data-anchor-id="benefits-of-sbb-open-data-usage">Benefits of SBB Open Data Usage</h2>
<ul>
<li><strong>For Improving User Experience</strong>
<ul>
<li><em>Better route planning</em>: Users get real-time updates and alternative routes in case of disruptions.</li>
<li><em>Increased accessibility</em>: Third-party apps enable multilingual, user-friendly interfaces.</li>
</ul></li>
<li><strong>For Encouraging Innovation</strong>
<ul>
<li>Startups and developers benefit from free access to transport data, reducing barriers to entry for new mobility solutions.</li>
<li>Integration with AI and predictive analytics enables smarter, more efficient public transport systems.</li>
</ul></li>
<li><strong>For Public Sector &amp; Economic Benefits</strong>
<ul>
<li>More efficient urban planning by municipalities.</li>
<li>Cost savings in infrastructure by optimizing transport flow through data-driven decisions.</li>
</ul></li>
</ul>
</section>
<section id="challenges-and-limitations" class="level2">
<h2 class="anchored" data-anchor-id="challenges-and-limitations">Challenges and Limitations</h2>
<ul>
<li><strong>Data Quality and Reliability Issues</strong>
<ul>
<li><em>Latency in real-time updates</em>: Delays in GTFS-RT data can lead to inaccurate predictions.</li>
<li><em>Incomplete data sets</em>: Some detailed real-time tracking (e.g., passenger load) is not publicly available.</li>
</ul></li>
<li><strong>Privacy and Security Concerns</strong>
<ul>
<li><em>Sensitive data handling</em>: Apps must ensure compliance with Swiss and EU GDPR regulations to protect user location data.</li>
<li><em>Potential misuse</em>: Open data can be exploited for unauthorized commercial purposes.</li>
</ul></li>
<li><strong>Technical and Integration Barriers</strong>
<ul>
<li><em>Data standardization issues</em>: Ensuring compatibility between SBB data and international transport networks (e.g., Deutsche Bahn, SNCF) remains a challenge.</li>
<li><em>API rate limits</em>: Developers may face restrictions on data requests, affecting large-scale applications.</li>
</ul></li>
</ul>
</section>
</section>
<section id="future-potential-and-recommendations" class="level1">
<h1>Future Potential and Recommendations</h1>
<p>Despite challenges, SBB’s open data presents significant future opportunities:</p>
<ul>
<li><strong><em>AI-driven predictive transport solutions</em></strong>: Using machine learning for demand forecasting to reduce congestion and improve efficiency.</li>
<li><strong><em>Expanded multimodal integration</em></strong>: Seamless ticketing across trains, buses, car-sharing, and even autonomous vehicles.</li>
<li><strong><em>Cross-border collaboration</em></strong>: Enhancing data-sharing agreements with European rail networks for smoother international travel.</li>
</ul>
<p>To maximize benefits, SBB should consider expanding real-time datasets, improving data accuracy, and collaborating with developers for enhanced innovation.</p>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>The SBB Open Data initiative is a vital component of Switzerland’s digital mobility transformation, enabling third-party developers to create innovative applications that improve public transport efficiency, user experience, and multimodal integration. From navigation apps to smart urban planning tools, SBB’s datasets empower both businesses and public institutions.</p>
<p>However, challenges related to data reliability, privacy concerns, and integration complexities must be addressed to ensure sustained innovation. With continued improvements and strategic collaborations, SBB’s open data ecosystem holds the potential to further revolutionize Swiss public transportation and contribute to smarter, more sustainable mobility solutions.</p>



</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list">
<div id="ref-sbb_ag_data_nodate" class="csl-entry" role="listitem">
AG, S. (n.d.-a). <em>Data protection at <span>SBB</span></em>. Retrieved March 10, 2025, from <a href="https://company.sbb.ch/en/the-company/responsibility-society-environment/safety/data-protection.html">https://company.sbb.ch/en/the-company/responsibility-society-environment/safety/data-protection.html</a>
</div>
<div id="ref-sbb_ag_getting_nodate" class="csl-entry" role="listitem">
AG, S. (n.d.-b). <em>Getting started <span></span> <span>SBB</span> developer portal</em>. Retrieved March 10, 2025, from <a href="https://developer.sbb.ch/getting-started/intro">https://developer.sbb.ch/getting-started/intro</a>
</div>
<div id="ref-sbb_ag_sbb_nodate-1" class="csl-entry" role="listitem">
AG, S. (n.d.-c). <em>The <span>SBB</span> <span>API</span> principles. <span>API</span> principles</em>. Retrieved March 10, 2025, from <a href="https://schweizerischebundesbahnen.github.io/api-principles/">https://schweizerischebundesbahnen.github.io/api-principles/</a>
</div>
<div id="ref-gassert_sbb_2017" class="csl-entry" role="listitem">
Gassert, H. (2017, February 28). <em><span>SBB</span> open data plattform - open data unlocks a burst of innovation. Liip</em>. <a href="https://www.liip.ch/en/blog/sbb-open-data-plattform">https://www.liip.ch/en/blog/sbb-open-data-plattform</a>
</div>
<div id="ref-odpch_general_nodate" class="csl-entry" role="listitem">
ODPCH. (n.d.). <em>General terms of use for the swiss public transport data defined as open data</em>. Retrieved March 10, 2025, from <a href="https://opentransportdata.swiss/en/terms-of-use/">https://opentransportdata.swiss/en/terms-of-use/</a>
</div>
</div></section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/julsraemy\.ch\/intro-open-data");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Julien A. Raemy | Introduction to Open Data</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/julsraemy/intro-open-data/edit/main/assignments/OpenData_SBB_Assess_AubD.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/julsraemy/intro-open-data/issues/new/choose" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>Content licensed under a Creative Commons Attribution 4.0 International license (CC BY 4.0)</p>
</div>
  </div>
</footer>




</body></html>